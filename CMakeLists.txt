cmake_minimum_required(VERSION 3.28)

project(CompizCompiler VERSION 0.1)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED TRUE)

include(ExternalProject)

# set(EXTERNAL_DIR ${CMAKE_CURRENT_SOURCE_DIR}/external)
# set_property(DIRECTORY PROPERTY EP_PREFIX ${EXTERNAL_DIR})

find_package(antlr4-runtime REQUIRED)

# CompiScript Lexer, Parser and Listener generated by ANTLR
add_library(cscript_lang STATIC 
    src/generated/CompiScriptBaseListener.cpp
    src/generated/CompiScriptListener.cpp
    src/generated/CompiScriptParser.cpp
    src/generated/CompiScriptLexer.cpp
)

target_include_directories(cscript_lang PRIVATE ${ANTLR4_INCLUDE_DIR})

target_link_libraries(cscript_lang PRIVATE antlr4_shared)

add_executable(czc src/main.cpp
    src/SymbolTable.cpp
)

target_include_directories(czc PRIVATE src ${ANTLR4_INCLUDE_DIR})

target_link_libraries(czc PRIVATE cscript_lang antlr4_shared)


